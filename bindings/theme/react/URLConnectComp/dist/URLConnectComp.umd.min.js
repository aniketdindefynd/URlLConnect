!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React")):"function"==typeof define&&define.amd?define("extension",["React"],t):"object"==typeof exports?exports.extension=t(require("React")):e.extension=t(e.React)}("undefined"!=typeof self?self:this,e=>(()=>{"use strict";var t={883:t=>{t.exports=e}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};r.r(o),r.d(o,{default:()=>u});var a={};r.r(a),r.d(a,{Component:()=>s,settings:()=>i});var l=r(883),c=r.n(l);function s({title:e="URLConnect Extension"}){const[t,n]=(0,l.useState)(""),[r,o]=(0,l.useState)(!0),[a,s]=(0,l.useState)(""),[i,u]=(0,l.useState)(!1),[m,d]=(0,l.useState)(!1),p=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=!1;return(async()=>{try{o(!0),s(""),u(!1),d(!1);const t=await fetch("/ext/urlconnect",{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);if(!(t.headers.get("content-type")||"").includes("application/json")){const e=await t.text();throw console.log("Non-JSON response snippet:",e.slice(0,200)),new Error("Proxy returned HTML instead of JSON - proxy not configured correctly")}const r=await t.json();e||(r.url?(n(r.url),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{u(e=>!m||e)},15e3)):s("No URL configured"))}catch(t){e||s(t.message||"Failed to fetch stored URL")}finally{e||o(!1)}})(),()=>{e=!0,p.current&&(clearTimeout(p.current),p.current=null)}},[]);const f=t?`/ext/urlconnect/frame?url=${encodeURIComponent(t)}`:"";return r?c().createElement("div",{className:"urlconnect-component"},c().createElement("div",{className:"hero-loading"},c().createElement("div",{className:"loading-spinner"}),c().createElement("p",null,"Loading..."))):a?c().createElement("div",{className:"urlconnect-component"},c().createElement("div",{className:"hero-error"},c().createElement("h3",null,"âš ï¸ Error Loading Content"),c().createElement("p",null,a),c().createElement("button",{onClick:()=>window.location.reload(),className:"retry-button"},"ðŸ”„ Retry"))):t?i?c().createElement("div",{className:"urlconnect-component"},c().createElement("div",{className:"hero-blocked"},c().createElement("div",{className:"blocked-content"},c().createElement("h3",null,"ðŸ›¡ï¸ Preview Not Available"),c().createElement("p",null,"This website cannot be embedded. Open it directly:"),c().createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"hero-button"},"ðŸ”— Open ",(()=>{try{return new URL(t).hostname}catch{return"Website"}})())))):c().createElement("div",{className:"urlconnect-component"},c().createElement("div",{className:"hero-iframe-container"},c().createElement("iframe",{src:f,className:"hero-iframe",title:"URLConnect Preview",style:{border:"none"},sandbox:"allow-scripts allow-same-origin allow-forms allow-popups",referrerPolicy:"no-referrer",onLoad:()=>{d(!0),u(!1),p.current&&(clearTimeout(p.current),p.current=null)},onError:()=>{d(!1),u(!0),p.current&&(clearTimeout(p.current),p.current=null)}}),!m&&c().createElement("div",{className:"hero-loading-overlay"},c().createElement("div",{className:"loading-spinner"}),c().createElement("p",null,"Loading preview...")))):c().createElement("div",{className:"urlconnect-component"},c().createElement("div",{className:"hero-no-url"},c().createElement("h3",null,"ðŸ”— No URL Configured"),c().createElement("p",null,"Please configure a URL through the URLConnect extension.")))}const i={label:"URLConnect Display",name:"urlconnect-display",props:[{id:"title",label:"Page Title",type:"text",default:"URLConnect Extension"}],blocks:[]},u={"urlconnect-display":{...a}};return o})());